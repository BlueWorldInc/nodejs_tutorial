(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{17317:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r,a=t(67294);function i(e){return r||(r=a.createElement("symbol",{id:"SvgLock"},a.createElement("path",{d:"M18.75 8h-1.13V5.71a5.62 5.62 0 10-11.24 0V8H5.25A2.27 2.27 0 003 10.29v11.42A2.27 2.27 0 005.25 24h13.5A2.27 2.27 0 0021 21.71V10.29A2.27 2.27 0 0018.75 8zM12 18.29A2.29 2.29 0 1114.25 16 2.27 2.27 0 0112 18.29zM15.38 8H8.62V5.71a3.38 3.38 0 116.76 0z"})))}i.displayName="SvgLock",i.defaultProps={viewBox:"0 0 24 24"}},75531:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var r=t(4730),a=t(92777),i=t(82262),o=t(45959),s=t(63553),l=t(37247),c=t(59499),d=t(19893),u=t(3451),m=t(50779),p=t(67294),f=t(85893),h=["children","onClose"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function v(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,l.Z)(e);if(n){var a=(0,l.Z)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,s.Z)(this,t)}}var b=function(e){(0,o.Z)(t,e);var n=v(t);function t(){return(0,a.Z)(this,t),n.apply(this,arguments)}return(0,i.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.children,t=e.onClose,a=(0,r.Z)(e,h);return(0,f.jsx)(m.Z,{node:(0,d.O5)(),children:(0,f.jsx)(u.Z,A(A({onClose:t},a),{},{children:n}))})}}]),t}(p.Component);(0,c.Z)(b,"defaultProps",{onClose:null})},15123:function(e,n,t){"use strict";t.d(n,{Z:function(){return Ie}});var r=t(50029),a=t(59499),i=t(87794),o=t.n(i),s=t(17489),l=t(55393),c=t(61148),d=t(75445),u=t(30381),m=t.n(u),p=t(10151),f=t(67294),h=t(76883),g=t(89271),A=t(74555),v=t(68482),b=t(32113),_=t(43858),y=t(44288),x=t(27613),Z=t(85996),j=t(75531),O=t(33141),C=t.n(O),R=t(85893),E=function(e){var n=e.submitAction;return(0,R.jsx)(j.Z,{onClose:n,children:(0,R.jsx)("div",{className:C().EscrowLegalModal,children:(0,R.jsxs)("ul",{children:[(0,R.jsxs)(g.Z,{as:"li",marginBottom:"medium",children:["- Nous traitons ces donn\xe9es dans le cadre de nos relations contractuelles pour vous fournir un service de livraison et compl\xe9ter votre compte, ainsi que dans le cadre de nos obligations l\xe9gales en mati\xe8re de lutte contre la fraude. Ces donn\xe9es sont accessibles aux prestataires de LBC France, dont Adevinta France (soci\xe9t\xe9 m\xe8re de LBC France), sur la base de son int\xe9r\xeat l\xe9gitime, qui concourent administrativement et techniquement \xe0 r\xe9aliser ces finalit\xe9s. Pour en savoir plus et exercer vos droits d\u2019acc\xe8s, de rectification, d\u2019opposition, de suppression, de limitation, \xe0 la portabilit\xe9,"," ",(0,R.jsx)(g.Z,{as:"a",color:"blue",colorHover:"blueDark",rel:"noopener",target:"_blank",href:"".concat(Z.e.BASE_URL,"/dc/cookies#"),title:"Vie priv\xe9e et Cookies",children:"cliquez ici."})]}),(0,R.jsxs)(g.Z,{as:"li",marginBottom:"medium",children:["- Vos donn\xe9es sont trait\xe9es par notre partenaire de paiement Adyen qui les v\xe9rifie afin de s\xe9curiser les transactions entre utilisateurs, sur la base de son obligation l\xe9gale en mati\xe8re de lutte contre le blanchiment et le financement du terrorisme. Pour en savoir plus et exercer vos droits d\u2019acc\xe8s, de rectification, d\u2019opposition, de suppression, de limitation, \xe0 la portabilit\xe9,"," ",(0,R.jsx)(g.Z,{as:"a",color:"blue",colorHover:"blueDark",href:"https://www.adyen.com/fr_FR/politiques-et-mentions-legales/privacy-policy",target:"_blank",rel:"noopener",children:"cliquez ici."})]}),(0,R.jsxs)(g.Z,{as:"li",marginBottom:"medium",children:["- Si vous utilisez le service de livraison Mondial Relay via leboncoin, Mondial Relay en tant que responsable de traitement est \xe9galement destinataire de vos donn\xe9es de contact afin d\u2019assurer l\u2019acheminement et le suivi de colis dans le cadre des relations contractuelles qui vous lient. Pour en savoir plus et exercer vos droits d\u2019acc\xe8s, de rectification, d\u2019opposition, de suppression, de limitation, \xe0 la portabilit\xe9,"," ",(0,R.jsx)(g.Z,{as:"a",color:"blue",colorHover:"blueDark",href:"https://www.mondialrelay.fr/donnees-personnelles",target:"_blank",rel:"noopener",children:"cliquez ici."})]})]})})})},w=t(92777),D=t(82262),k=t(10748),B=t(45959),S=t(63553),P=t(37247),M=t(82175),I=t(7258),q=t(25099),V=t(16813),L="personal_name",N="date_of_birth",z="address",F="identity_document",T="bank_statement",U="iban",Y=L,Q=N,H=z,J=F,X=T,G=U,K=[L,N,z,F,T,U],W=t(51976),$=t(94184),ee=t.n($),ne=t(5049),te=t(34774),re=t(45735),ae=t(86025),ie=t(25049),oe=t(82941),se=t(17317),le=t(16414),ce=t(41602),de=t(69919),ue=t(44575),me=t(65721),pe=t(19881),fe=t(77666),he=t(87995),ge=t(5232),Ae=t.n(ge);function ve(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,P.Z)(e);if(n){var a=(0,P.Z)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,S.Z)(this,t)}}var be=function(e){(0,B.Z)(t,e);var n=ve(t);function t(){var e;(0,w.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),(0,a.Z)((0,k.Z)(e),"lockLabel",(function(e){return(0,R.jsxs)("span",{children:[e," ",(0,R.jsx)(c.ZP,{size:"x-small",children:(0,R.jsx)(se.Z,{})})]})})),(0,a.Z)((0,k.Z)(e),"handleChangeDocument",(function(n){var t=n.value;e.props.setFieldValue("doc_type",t)})),(0,a.Z)((0,k.Z)(e),"serviceAutocomplete",(function(e){return(0,de.$r)((0,te.hr)(e))})),(0,a.Z)((0,k.Z)(e),"serviceValidate",(function(e){return(0,de.YN)(e)})),(0,a.Z)((0,k.Z)(e),"personal_name",(function(e){var n=e.errors,t=e.handleBlur,r=e.handleChange,a=e.touched,i=e.values;return(0,R.jsxs)("div",{"data-qa-id":"personal-name",className:ee()(Ae().personalName),children:[(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:Ae().titleContent,children:[(0,R.jsx)("div",{className:Ae().iconContainer,children:(0,R.jsx)(c.ZP,{size:"medium",children:(0,R.jsx)(ae.Z,{})})}),(0,R.jsx)(g.Z,{as:"p",marginTop:"medium",marginBottom:"small",children:"Ces informations doivent correspondre aux Nom et Pr\xe9nom figurant sur votre pi\xe8ce d\u2019identit\xe9."})]})}),(0,R.jsx)(ie.Z,{marginTop:"medium",id:"firstname",name:"firstname",label:"Pr\xe9nom",error:n.firstname,touched:a.firstname,onChange:r,onBlur:t,value:i.firstname,borderWidth:"x-small",borderStyle:"solid",borderColor:"greyMedium",required:!0,maxLength:50}),(0,R.jsx)(ie.Z,{id:"name",name:"name",label:"Nom",maxLength:50,error:n.name,touched:a.name,onChange:r,onBlur:t,value:i.name,borderWidth:"x-small",borderStyle:"solid",borderColor:"greyMedium",marginBottom:"none",required:!0})]})})),(0,a.Z)((0,k.Z)(e),"date_of_birth",(function(e){var n=e.errors,t=e.touched,r=e.handleBlur,a=e.setFieldValue,i=e.values;return(0,R.jsx)(ie.Z,{id:"date_of_birth",name:"date_of_birth",label:"Date de naissance",error:n.date_of_birth,touched:t.date_of_birth,placeholder:"jj/mm/aaaa",maxLength:10,onChange:function(e){var n=(0,me.D)(e.target.value);a("date_of_birth",n)},onBlur:r,value:i.date_of_birth,dataQaIds:{input:"date-of-birth"},borderWidth:"x-small",borderStyle:"solid",borderColor:"greyMedium",marginTop:"x-large",required:!0})})),(0,a.Z)((0,k.Z)(e),"address",(function(n){var t=n.errors,r=n.touched,a=n.values,i=n.handleBlur,o=n.handleChange,s=n.setFieldValue;return(0,R.jsxs)("div",{"data-qa-id":"address",children:[(0,R.jsx)(ie.Z,{id:"address_street",name:"address_street",label:"Adresse",maxLength:"150",error:t.address_street,touched:r.address_street,onChange:o,onBlur:i,value:a.address_street,required:!0}),(0,R.jsx)(oe.Z,{required:!0,marginTop:"large",children:"Ville ou code postal"}),(0,R.jsx)(he.Z,{id:"location",Icon:le.Z,name:"location",onBlur:i,placeholder:"Saisissez une ville, un code postal ou une adresse",onChange:function(e){s("location",e)},value:(0,p.Z)("",["location","label"],a),service:e.serviceAutocomplete,serviceValidate:e.serviceValidate,minLengthBeforeAPICall:3,error:t.location,touched:r.location,required:!0})]})})),(0,a.Z)((0,k.Z)(e),"identity_document",(function(n){var t=n.values,r=n.errors,a=n.touched,i=n.setFieldValue,o="ID_CARD"===t.doc_type?2:1,s=x.JY.find((function(e){return e.value===t.doc_type}));return(0,R.jsxs)("div",{"data-qa-id":"identity-document",children:[(0,R.jsx)(oe.Z,{htmlFor:"card",required:!0,marginTop:"large",children:e.lockLabel("Pi\xe8ce d\u2019identit\xe9")}),(0,R.jsxs)("div",{className:Ae().grid,children:[(0,R.jsx)(ce.Z,{to:"tiny",children:(0,R.jsx)(ne.ZP,{options:x.JY,errors:r,touched:a,onChange:e.handleChangeDocument,variant:"vertical",selectedValue:s})}),(0,R.jsx)(ce.Z,{from:"tiny",children:(0,R.jsx)(ne.ZP,{options:x.JY,errors:r,touched:a,onChange:e.handleChangeDocument,selectedValue:s})})]}),(0,R.jsx)(fe.Z,{onChange:i,value:t.file,doc_type:t.doc_type,minSize:x.ME,maxSize:x.dg,acceptedFiles:x.ZW,errors:r.file,name:"file",maxFiles:o,touched:a.file})]})})),(0,a.Z)((0,k.Z)(e),"bank_statement",(function(n){var t=n.handleBlur,r=n.setFieldValue,a=n.values,i=n.errors,o=n.touched;return(0,R.jsxs)(ue.Z,{onBlur:t,onChange:r,name:"bank_statement",value:a.bank_statement,label:e.lockLabel("RIB"),accept:"image/jpeg, image/png, application/pdf",minSize:x.mB,maxSize:x.dg,errors:i,touched:o,"data-qa-id":"bank-document",required:!0,children:[(0,R.jsx)(W.Z,{children:"Ajouter un RIB"}),(0,R.jsxs)(g.Z,{marginTop:"small",as:"p",variant:"small",color:"grey",children:["Formats de document accept\xe9s: pdf, png, jpg et poids compris entre"," ",(0,re.sS)(x.mB)," et ",(0,re.sS)(x.dg)]})]})})),(0,a.Z)((0,k.Z)(e),"iban",(function(n){var t=n.errors,r=n.touched,a=n.handleBlur,i=n.values,o=n.setFieldValue;return(0,R.jsx)(ie.Z,{id:"iban",name:"iban",type:"text",label:e.lockLabel("IBAN"),error:t.iban,touched:r.iban,onBlur:a,value:i.iban,onChange:function(e){var n=(0,pe.Z)(e.target.value);o("iban",n)},required:!0})})),e}return(0,D.Z)(t,[{key:"render",value:function(){var e=this,n=this.props,t=n.handleSubmit,r=n.errors,a=n.handleBlur,i=n.handleChange,o=n.setFieldValue,c=n.setFieldTouched,d=n.touched,u=n.values,m=n.fields,p=n.isSubmitting,f=n.isValid,h=n.isMangopay,g=n.isAdyenInMaintenance,A=n.status;return(0,R.jsxs)("form",{onSubmit:t,children:[m.map((function(n,t){if(!e[n])return null;var s=e[n];return(0,R.jsx)(s,{errors:r,handleBlur:a,handleChange:i,setFieldValue:o,setFieldTouched:c,touched:d,values:u,isMangopay:h},t)})),(0,R.jsx)(W.Z,{type:"submit",marginTop:"x-large",marginBottom:"x-large",disabled:p||!f||!h&&g,variant:"contained",width:{_:"full",small:"auto"},children:"Envoyer"}),A&&"error"===A&&(0,R.jsx)(s.Z,{mt:"x-small",children:l.globalFormError})]})}}]),t}(f.Component),_e=be;function ye(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function xe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ye(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ye(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ze(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,P.Z)(e);if(n){var a=(0,P.Z)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,S.Z)(this,t)}}var je=function(e){(0,B.Z)(t,e);var n=Ze(t);function t(){var e;(0,w.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),(0,a.Z)((0,k.Z)(e),"isInitialValid",(function(e,n){if(n.includes(G)||n.includes(J)||n.includes(X))return!1;var t=!0;return n.includes(Y)&&(t=!!(t&&e.firstname&&e.name)),n.includes(Q)&&(t=t&&!!e.date_of_birth),n.includes(H)&&(t=t&&!!e.location),t})),(0,a.Z)((0,k.Z)(e),"validationSchema",(function(){var n=e.props.fields,t={};return t.doc_type=(0,I.Z_)(),n.includes(Y)&&(t.firstname=(0,I.Z_)().min(2,l.firstname.TOO_SHORT).max(50,l.firstname.TOO_LONG).matches(V.m2,l.firstname.INVALID_SYNTAX).required(l.firstname.REQUIRED),t.name=(0,I.Z_)().min(2,l.name.TOO_SHORT).max(50,l.name.TOO_LONG).matches(V.m2,l.name.INVALID_SYNTAX).required(l.name.REQUIRED)),n.includes(Q)&&(t.date_of_birth=(0,I.Z_)().required(l.date_of_birth.REQUIRED).isDateOfBirth(l.date_of_birth.INVALID_DATE)),n.includes(H)&&(t.address_street=(0,I.Z_)().required(l.address_street.REQUIRED),t.location=(0,I.nK)().required(l.location.REQUIRED).isLocation(l.location.LOCATION)),n.includes(J)&&(t.file=(0,I.nK)().required(l.file.REQUIRED).test("fileSize",l.file.GENERIC_ERROR,(function(e){return"ID_CARD"===this.resolve((0,I.iH)("doc_type"))?e&&(0,q.m)(e[0],x.ME)&&(0,q.m)(e[1],x.ME):e&&(0,q.m)(e[0],x.ME)}))),n.includes(X)&&(t.bank_statement=(0,I.nK)().required(l.bank_statement.REQUIRED).test("fileSize",l.bank_statement.GENERIC_ERROR,(function(e){return e&&(0,q.m)(e[0],x.mB)}))),n.includes(G)&&(t.iban=(0,I.Z_)().isIbanValid(l.iban.INVALID_IBAN).required(l.iban.REQUIRED)),(0,I.Ry)().shape(t)})),(0,a.Z)((0,k.Z)(e),"computeBirthDate",(function(e){if(e){var n=e.month,t=e.day,r=e.year;return m()("".concat(n<10?"0"+n:n,"/").concat(t<10?"0"+t:t,"/").concat(r),"MM/DD/YYYY").format("DD/MM/YYYY")}return""})),e}return(0,D.Z)(t,[{key:"render",value:function(){var e,n=this.props,t=n.onSubmit,r=n.fields,a=n.isMangopay,i=n.isAdyenInMaintenance,o=n.userPersonalData,s=o.birthDate,l=o.addresses,c=o.firstname,d=o.lastname,u=this.computeBirthDate(s),m=(null===l||void 0===l||null===(e=l.billing)||void 0===e?void 0:e.zipcode)&&{city:l.billing.city,department_id:l.billing.dptCode,region_id:l.billing.regionCode,zipcode:l.billing.zipcode,label:"".concat(l.billing.city," (").concat(l.billing.zipcode,")")},f=xe(xe({},{firstname:c&&V.m2.test(c)?c:"",name:d&&V.m2.test(d)?d:"",address_street:(0,p.Z)("",["billing","address"],l),date_of_birth:u,location:m}),{},{iban:"",doc_type:"",file:null,bank_statement:null}),h=this.isInitialValid(f,r);return(0,R.jsx)(M.J9,{initialValues:f,isInitialValid:h,onSubmit:t,validationSchema:this.validationSchema,render:function(e){var n=e.errors,t=e.handleBlur,o=e.handleChange,s=e.handleSubmit,l=e.setFieldValue,c=e.setFieldTouched,d=e.touched,u=e.isSubmitting,m=e.isValid,p=e.values,f=e.status;return(0,R.jsx)(_e,{errors:n,handleBlur:t,handleChange:o,handleSubmit:s,setFieldValue:l,setFieldTouched:c,touched:d,isSubmitting:u,isValid:m,values:p,status:f,fields:r,isAdyenInMaintenance:i,isMangopay:a})}})}}]),t}(f.Component);(0,a.Z)(je,"defaultProps",{fields:[],userPersonalData:{}});var Oe=je,Ce={src:"/_next/static/media/mangopay-escrow.68cc26d2.jpg",height:264,width:462,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAFAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAZEAADAQEBAAAAAAAAAAAAAAABAgMABBH/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//EABsRAQACAgMAAAAAAAAAAAAAAAEAAhEhAxJx/9oADAMBAAIRAxEAPwCq8nNSy2PVc3VqMoVl8CqD4BmZh0qmyVeS4uHHmp//2Q=="},Re=t(31145),Ee=t.n(Re),we=function(e){var n=e.submitAction;return(0,R.jsx)(j.Z,{onClose:n,children:(0,R.jsx)("div",{className:Ee().MangopayLegalModal,children:(0,R.jsxs)(g.Z,{children:["Nous traitons ces donn\xe9es dans le cadre de nos relations contractuelles pour vous fournir un service de paiement et compl\xe9ter votre compte, ainsi que dans le cadre de nos obligations l\xe9gales en mati\xe8re de lutte contre la fraude. Ces donn\xe9es sont accessibles (ii) \xe0 notre prestataire de paiement Mangopay, en sa qualit\xe9 de co-responsable de traitement, pour ses propres finalit\xe9s, pour en savoir plus"," ",(0,R.jsx)(g.Z,{as:"a",color:"blue",colorHover:"blueDark",rel:"noopener noreferrer",target:"_blank",href:"https://www.mangopay.com/fr/privacy/",title:"Vie priv\xe9e et Cookies",children:"cliquez ici"}),", et \xe9galement (ii) aux prestataires de LBC France, dont Adevinta France (soci\xe9t\xe9 m\xe8re de LBC France), sur la base de son int\xe9r\xeat l\xe9gitime, qui concourent administrativement et techniquement \xe0 r\xe9aliser ces finalit\xe9s, en qualit\xe9 de sous-traitants. Pour en savoir plus et exercer vos droits d\u2019acc\xe8s, de rectification, d\u2019opposition, de suppression, de limitation, \xe0 la portabilit\xe9"," ",(0,R.jsx)(g.Z,{as:"a",color:"blue",colorHover:"blueDark",rel:"noopener noreferrer",target:"_blank",href:"".concat(Z.e.BASE_URL,"/dc/cookies#"),title:"Vie priv\xe9e et Cookies",children:"cliquez ici"}),"."]})})})},De=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return{eventname:"kyc::".concat(e,"::").concat(n),pagetype:"kyc",seller_agreement_settings:{deal_price:"0",deal_exchange_type:t,deal_delivery:"0",deal_delivery_costs:"0",deal_fee:"0",deal_total_price:"0"}}},ke=t(87124),Be=t.n(ke);function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Me=function(e){var n=e.handleSuccess,t=e.trackingPath,a=e.isMangopay,i=(0,A.v9)((function(e){return e.user})),u=(0,A.v9)((function(e){return e.user.escrowRequiredFields})),Z=(0,A.v9)((function(e){return e.user.mangopayRequiredFields})),j=(0,f.useState)(!1),O=j[0],C=j[1],w=(0,f.useState)(!1),D=w[0],k=w[1],B=(0,A.I0)(),S=a?De(t,"kyc_auto_entry","Mangopay"):De(t,"kyc_entry"),P=function(e){var n=e.location&&e.location.city,t=e.location&&e.location.zipcode,r=e.name,o=e.firstname,s=e.address_street,l=e.date_of_birth,c=e.doc_type,d=e.file||[],p=e.bank_statement||[],f=e.iban;f&&(f=f.replace(/\s/g,""));var h={id:String(i.data.userId),iban:f},g=function(e,n){var t={};return e===x.V4.ID_CARD&&2===n.length&&(t.id_card_front=n[0],t.id_card_back=n[1]),e===x.V4.PASSPORT&&(t.passport=n[0]),t}(c,d),A={personal_name:{lastname:r,firstname:o},address:{address_street:s,address_postal_code:t,address_city:n},date_of_birth:{date_of_birth:m()(l,"DD/MM/YYYY").format("Y-MM-DD")},identity_document:Pe({},g),bank_statement:{bank_statement:p[0]}},v=(a?Z:u).reduce((function(e,n){return Pe(Pe({},e),A[n])}),h),b=new FormData;return Object.keys(v).forEach((function(e){v[e]&&b.append(e,v[e])})),b},M=function(){var e=(0,r.Z)(o().mark((function e(r,s){var l,c,d,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=P(r),e.prev=1,c=a?b.m.validateMangopay:b.m.validateEscrow,e.next=5,c(i.data.userId,l);case 5:n(),d=a?De(t,"kyc_auto_confirmation","Mangopay"):De(t,"kyc_confirmation"),h._q.sendUnlimitedPageLoad(d),B(a?y.h.resetMangopayRequiredFields():y.h.resetEscrowRequiredFields()),e.next=24;break;case 11:if(e.prev=11,e.t0=e.catch(1),u=a?De(t,"kyc_auto_entry_error","Mangopay"):De(t,"kyc_entry_error"),h._q.sendUnlimitedPageLoad(u),s.setSubmitting(!1),e.t0.response){e.next=18;break}return e.abrupt("return",s.setStatus("error"));case 18:e.t1=e.t0.response.status,e.next=422===e.t1?21:23;break;case 21:return I(e.t0.data,s),e.abrupt("break",24);case 23:s.setStatus("error");case 24:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n,t){return e.apply(this,arguments)}}(),I=function(e,n){var t=e.id_card||e.id_card_front||e.id_card_back||e.passport;t&&(t===x.Sg.TOO_MANY_PAGES?n.setFieldError("file",l.file.TOO_MANY_PAGES):n.setFieldError("file",l.file.INVALID_DOCUMENT)),Object.keys(e).forEach((function(e){!x.MO.includes(e)&&l[e]&&n.setFieldError(e,l[e]["INVALID_".concat(e.toUpperCase())])}))},q=function(){C(!1)},V=function(){var e=(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.m.getAdyenMaintenanceStatus();case 3:if(n=e.sent,!n.psp_maintenance){e.next=7;break}return e.abrupt("return",k(!0));case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:B(y.h.getEscrowRequiredFields());case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){a?B(y.h.getMangopayRequiredFields()):V()}),[]),(0,_.Z)({payload:S});var L=(0,p.Z)({},["data","personalData"],i),N=a?Z:u,z=function(e){return e.filter((function(e){return K.includes(e)})).sort((function(e,n){return K.indexOf(e)-K.indexOf(n)}))}(N);return 0===N.length?(0,R.jsxs)("div",{className:Be().wrapper,children:[(0,R.jsx)(g.Z,{variant:"title2",as:"h2",marginBottom:"none",marginTop:"x-small",children:"Paiement s\xe9curis\xe9"}),(0,R.jsx)(g.Z,{as:"p",variant:"body",marginTop:"medium",marginBottom:"large",children:"Vous avez d\xe9j\xe0 renseign\xe9 toutes les informations n\xe9cessaires pour recevoir vos paiements !"})]}):(0,R.jsxs)("div",{className:Be().wrapper,children:[O&&!a&&(0,R.jsx)(E,{submitAction:q}),O&&a&&(0,R.jsx)(we,{submitAction:q}),a&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:Be().mangopayEscrowImage,children:(0,R.jsx)(v.Z,{src:Ce,width:160,height:91,alt:"v\xe9rification d'identit\xe9"})}),(0,R.jsx)(g.Z,{variant:"title2",as:"h2",marginBottom:"none",marginTop:"small",textAlign:"center",children:"V\xe9rification d\u2019identit\xe9"}),(0,R.jsx)(g.Z,{as:"p",variant:"body",marginTop:"medium",marginBottom:"medium",textAlign:"center",children:"Pour r\xe9aliser une vente s\xe9curis\xe9e de votre v\xe9hicule, il est indispensable que votre identit\xe9 soit valid\xe9e."}),(0,R.jsx)(g.Z,{as:"p",variant:"small",marginBottom:"large",textAlign:"center",children:"Ces informations sont s\xe9curis\xe9es et non communiqu\xe9es aux autres utilisateurs."})]}),!a&&(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:Be().textContainer,children:[(0,R.jsx)(g.Z,{variant:"title2",as:"h2",marginBottom:"none",marginTop:"x-small",children:"Paiement s\xe9curis\xe9"}),(0,R.jsx)("div",{className:Be().logoContainer,children:(0,R.jsx)(c.ZP,{marginLeft:"small",color:"orange",size:"fluid",children:(0,R.jsx)(d.Z,{})})})]}),(0,R.jsx)(g.Z,{as:"p",variant:"body",marginTop:"medium",marginBottom:"large",children:"Renseignez les informations suivantes pour recevoir votre paiement !"}),D&&(0,R.jsx)(s.Z,{children:"Notre service est momentan\xe9ment indisponible, veuillez r\xe9essayer plus tard"})]}),(0,R.jsx)(Oe,{onSubmit:M,fields:z,userPersonalData:L,isMangopay:a,isAdyenInMaintenance:D}),(0,R.jsx)(g.Z,{variant:"small",as:"a",onClick:function(){C(!0)},color:"greyDark",colorHover:"greyDark",children:"Me renseigner sur le responsable de traitement, les destinataires et la finalit\xe9 de la collecte des donn\xe9es."})]})};Me.defaultProps={escrowRequiredFields:K};var Ie=Me},50791:function(e,n,t){"use strict";t.d(n,{Z:function(){return F}});var r,a,i,o,s,l,c,d,u,m,p=t(39872),f=t(51976),h=t(61148),g=t(75445),A=t(41602),v=t(67294),b=t(76883),_=t(89271),y=t(74555),x=t(15123),Z=t(68482),j=t(75531),O=t(71383),C=t(82297),R=t(50056),E=(0,C.Z)("div")(r||(r=(0,O.Z)(["\n  position: relative;\n  display: flex;\n  background-color: ",";\n  border-radius: 0.4rem;\n  margin-bottom: ",";\n\n  ","\n"])),(0,R.R)("colors.orangeLight"),(0,R.R)("space.medium"),(function(e){var n=e.homepage,t=e.theme;return n&&"margin: ".concat(t.space.large," ").concat(t.space.medium," ").concat(t.space.medium," ").concat(t.space.medium,";\n  ")})),w=(0,C.Z)("div")(a||(a=(0,O.Z)(["\n  padding: ",";\n  align-items: flex-start;\n  flex-direction: column;\n\n  @media (min-width: ",") {\n    justify-content: space-between;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    width: 100%;\n  }\n"])),(0,R.R)("space.large"),(0,R.R)("breakpoints.small")),D=(0,C.Z)("div")(i||(i=(0,O.Z)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ",";\n\n  @media (min-width: ",") {\n    margin-bottom: 0;\n  }\n"])),(0,R.R)("space.large"),(0,R.R)("breakpoints.small")),k=(0,C.Z)("div")(o||(o=(0,O.Z)(["\n  @media (min-width: ",") {\n    display: flex;\n  }\n"])),(0,R.R)("breakpoints.small")),B=(0,C.Z)("div")(s||(s=(0,O.Z)(["\n  width: 9rem;\n  height: 2.3rem;\n  padding-bottom: ",";\n\n  @media (min-width: ",") {\n    margin-left: ",";\n  }\n"])),(0,R.R)("space.x-small"),(0,R.R)("breakpoints.small"),(0,R.R)("space.small")),S=(0,C.Z)("div")(l||(l=(0,O.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n"]))),P=(0,C.Z)("div")(c||(c=(0,O.Z)(["\n  position: relative;\n  display: flex;\n  border: "," solid ",";\n  flex-direction: column;\n  border-radius: ",";\n  background: ",";\n  margin-bottom: ",";\n  padding-top: ",";\n  padding-right: ",";\n  padding-bottom: ",";\n  padding-left: ",";\n\n  @media (min-width: ",") {\n    padding-left: ",";\n  }\n\n  ","\n"])),(0,R.R)("borderWidths.x-small"),(0,R.R)("colors.greyMedium"),(0,R.R)("radii.small"),(0,R.R)("colors.white"),(0,R.R)("space.medium"),(0,R.R)("space.large"),(0,R.R)("space.large"),(0,R.R)("space.large"),(0,R.R)("space.large"),(0,R.R)("breakpoints.small"),(0,R.R)("space.small"),(function(e){var n=e.homepage,t=e.theme;return n&&"margin: ".concat(t.space.large," ").concat(t.space.medium," ").concat(t.space.medium," ").concat(t.space.medium,";\n  ")})),M=(0,C.Z)("div")(d||(d=(0,O.Z)(["\n  margin-left: auto;\n"]))),I=(0,C.Z)("div")(u||(u=(0,O.Z)(["\n  display: flex;\n  align-items: center;\n"]))),q=(0,C.Z)("div")(m||(m=(0,O.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),V=t(78964),L={transaction:"Transaction",myaccount:"Myaccount",home:"myaccount_home_account_part",homepage:"homepage"},N={src:"/_next/static/media/transactionImg.b76ab582.png",height:69,width:129,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAP1BMVEX/mFfjlmY4lkvsvq/HAAD+aQsAvGX/hTnxmXciuGj/kUr/0N8Nt2LtfDLDkmf/XQD+XwD/rnvLu53+uY3+07dSKgBCAAAAEXRSTlP9+HLRA4CO+oqi9R/u0Y1QSoTMEE0AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAqSURBVAiZBcEHAgAQDACxM1tb8f+3Soi+zJV2pPQ8MBInaL1iQlOH8eQDE9QBHb6nUZgAAAAASUVORK5CYII="},z=t(85893),F=function(e){var n=e.path,t=(0,v.useState)(!1),r=t[0],a=t[1],i=(0,v.useState)(!1),o=i[0],s=i[1],l=(0,v.useState)(!1),c=l[0],d=l[1],u=(0,y.v9)((function(e){return e.user.escrowRequiredFields})),m=(0,y.v9)((function(e){return e.datalayer.isUtagReady}));(0,v.useEffect)((function(){(null===u||void 0===u?void 0:u.length)>0&&m&&!c&&b._q.sendUnlimitedPageLoad({eventname:"KYC_CTA_display_".concat(L[n])})}),[u]);var O=function(){b._q.sendUnlimitedPageLoad(function(e){return{eventname:"KYC_CTA_agree_".concat(e)}}(L[n])),a(!0),s(!1)};return o?(0,z.jsxs)(P,{homepage:"homepage"===n,children:[(0,z.jsxs)(I,{children:[(0,z.jsx)(A.Z,{from:"small",children:(0,z.jsx)(p.Z,{marginRight:"small",children:(0,z.jsx)(Z.Z,{src:V.Z,alt:"paiement valid\xe9",height:77,width:77})})}),(0,z.jsxs)(q,{children:[(0,z.jsx)(_.Z,{variant:"largeImportant",marginBottom:"x-small",children:"Merci beaucoup !"}),(0,z.jsx)(_.Z,{as:"p",variant:"body",children:"Le traitement des informations est en cours. Une fois termin\xe9, vous recevrez un e-mail de confirmation."})]}),(0,z.jsx)(M,{children:(0,z.jsx)(A.Z,{from:"small",children:(0,z.jsx)(f.Z,{color:"secondary",onClick:O,children:"J\u2019ai compris"})})})]}),(0,z.jsx)(A.Z,{to:"small",children:(0,z.jsx)(M,{children:(0,z.jsx)(f.Z,{color:"secondary",marginTop:"large",onClick:O,width:"auto",children:"J\u2019ai compris"})})})]}):0===(null===u||void 0===u?void 0:u.length)||r?null:(0,z.jsxs)(E,{homepage:"homepage"===n,children:[(0,z.jsx)(S,{children:(0,z.jsx)(A.Z,{from:"small",children:(0,z.jsx)(p.Z,{display:"flex",children:(0,z.jsx)(Z.Z,{src:N,alt:"paiement s\xe9curis\xe9",height:69,width:129})})})}),(0,z.jsxs)(w,{children:[(0,z.jsxs)(D,{children:[(0,z.jsxs)(k,{children:[(0,z.jsx)(_.Z,{variant:"largeImportant",children:"Paiement s\xe9curis\xe9"}),(0,z.jsx)(B,{children:(0,z.jsx)(h.ZP,{color:"orange",size:"fluid",children:(0,z.jsx)(g.Z,{})})})]}),(0,z.jsx)(_.Z,{variant:"body",marginTop:"x-small",children:"Il vous reste quelques informations \xe0 compl\xe9ter pour recevoir votre paiement"})]}),(0,z.jsx)(f.Z,{color:"secondary",variant:"contained",onClick:function(){b._q.sendUnlimitedPageLoad(function(e){return{eventname:"KYC_CTA_continue_".concat(e)}}(L[n])),d(!0)},children:"Recevoir mon paiement"})]}),c&&(0,z.jsx)(j.Z,{onClose:function(){d(!1)},children:(0,z.jsx)(x.Z,{handleSuccess:function(){s(!0),d(!1)},trackingPath:L[n]})})]})}},15324:function(e,n,t){"use strict";t.d(n,{y:function(){return l}});var r=t(97754),a=t(85996),i=t(51424),o=t(51377),s=(0,r.kG)("PROMOTIONS",a.e),l={getPromotionByLocation:function(e,n,t,r,a){return(0,i.ZP)((function(i){return(0,o.W)("".concat(s,"/locations/content"),{method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({locations:e,templates:n,classified:r,user:t,deal:a}),credentials:"include"})}))}}},78964:function(e,n){"use strict";n.Z={src:"/_next/static/media/payout_ok.cf06e031.png",height:283,width:283,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAPFBMVEVMaXGnqtswMa0oJ5tHSLb7/ftmZsH7/PiwufXy9Pn///+Hov/7p3z09/jp7PXP0edUVbegotm2uNl4ecA73C60AAAAD3RSTlMAlWp++6n8MilfeAYvuZaj2SWaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANUlEQVQImV3LNw4AIRDAQBOXcEf8/18R0DGlJcORgU9icQH4a/NVADet7xFIo1m1SxCj7/FYMBEBE+sPiXsAAAAASUVORK5CYII="}},33141:function(e){e.exports={EscrowLegalModal:"styles_EscrowLegalModal__cpYZ8"}},5232:function(e){e.exports={grid:"styles_grid__1fSfG",full:"styles_full__wsORu",personalName:"styles_personalName__TgLC0",titleContent:"styles_titleContent__Og6fl",iconContainer:"styles_iconContainer__PqbGQ"}},31145:function(e){e.exports={MangopayLegalModal:"styles_MangopayLegalModal__FMCSe"}},87124:function(e){e.exports={wrapper:"styles_wrapper__oK7_j",loading:"styles_loading__J6Xb6",explanations:"styles_explanations__xLVkC",mangopayEscrowImage:"styles_mangopayEscrowImage__g0EjU",logoContainer:"styles_logoContainer___3j1y",textContainer:"styles_textContainer__ogFx8"}}}]);